(this["webpackJsonpmovies-challenge"]=this["webpackJsonpmovies-challenge"]||[]).push([[0],{50:function(e,t,c){},55:function(e,t,c){},78:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(20),s=c.n(r),i=(c(50),c(51),c(80)),j=c(16),o=c(30),l=c(42),d=c(22),b=c(7),h=(c(55),c(15)),O=c(79),u=c(44),p=c(81),x=c(83),f=c(82),m=c(8),v=c(24),E=c.n(v),g=c(43),y="ee412a3a",T=Object(g.debounce)((function(e,t,c){E.a.get("https://www.omdbapi.com/",{params:{type:"movie",s:t,apiKey:y,page:e}}).then((function(t){var n=t.data;n.Error||(c({type:"GET_MOVIES",payload:n.Search}),c({type:"UPDATE_PAGE_INDEX",payload:e}))}))}),200),_=c(1),I=Object(j.b)((function(e){return{appState:e}}),(function(e){return{getMovies:function(){return e((function(e,t){var c=t().searchTerm;E.a.get("https://www.omdbapi.com/",{params:{type:"movie",s:c,apiKey:y,page:1}}).then((function(t){var c=t.data;e({type:"GET_MOVIES",payload:c.Search})}))}))},loadMoreMovies:function(){return e((function(e,t){var c=t(),n=c.page,a=c.searchTerm;T(n+1,a,e)}))},updateSearchTerm:function(t){return e(function(e){return function(t){t({type:"UPDATE_SEARCH_TERM",payload:e})}}(t))},clearMoviesList:function(){return e({type:"CLEAR_MOVIES_LIST"})}}}))((function(e){var t=Object(m.b)(),c=Object(n.useState)(""),a=Object(h.a)(c,2),r=a[0],s=a[1];Object(n.useEffect)((function(){return window.addEventListener("scroll",(function(t){window.innerHeight+window.scrollY>=t.target.body.offsetHeight-10&&e.loadMoreMovies()})),function(){return window.removeEventListener("scroll",onscroll)}}),[]);var i=function(e){return e.target.src="https://cdn.tgdd.vn/hoi-dap/580732/cach-khac-phuc-loi-404-not-found-3-1-800x300.jpg"};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"mt-4 mb-4",children:[Object(_.jsx)(O.a,{children:Object(_.jsx)(u.a,{className:"d-flex justify-content-center align-items-center",children:Object(_.jsx)("h2",{children:"NETFLIX"})})}),Object(_.jsxs)(O.a,{children:[Object(_.jsx)(u.a,{sm:{span:5,offset:3},children:Object(_.jsx)(p.a.Control,{className:"mb-3",placeholder:"Type to search",value:r,onChange:function(e){s(e.target.value)}})}),Object(_.jsx)(u.a,{xs:{span:4,offset:5},sm:{span:1,offset:0},children:Object(_.jsx)(x.a,{variant:"primary",onClick:function(){e.updateSearchTerm(r),e.clearMoviesList(),e.getMovies(r)},children:"Search"})})]})]}),Object(_.jsx)(O.a,{className:"gx-4 gy-4",children:e.appState.movies.map((function(e){return Object(_.jsx)(u.a,{sm:12,md:6,lg:4,style:{cursor:"pointer"},children:Object(_.jsxs)(f.a,{onClick:function(){return c=e.imdbID,void t.push("/detail/".concat(c));var c},children:[Object(_.jsx)(f.a.Img,{variant:"top",src:e.Poster,onError:i}),Object(_.jsx)(f.a.Title,{className:"p-2",children:(c=e.Title,c.length>15?"".concat(c.slice(0,20)," ..."):c)})]},e.imdbID)});var c}))})]})})),M=Object(j.b)((function(e){return{detail:e.detail}}),(function(e){return{getDetailMovie:function(t){return e(function(e){return function(t){E.a.get("https://www.omdbapi.com/",{params:{type:"movie",apiKey:y,i:e}}).then((function(e){var c=e.data;t({type:"GET_DETAIL_MOVIE",payload:c})}))}}(t))},clearDetailState:function(){return e({type:"CLEAR_DETAIL_PAGE"})}}}))((function(e){var t=Object(b.f)(),c=Object(b.g)().id;Object(n.useEffect)((function(){e.getDetailMovie(c)}),[c]);var a=e.detail,r=a.Title,s=a.Plot,i=a.Poster,j=a.Actors,o=a.Runtime,l=a.Writer,d=a.Released,h=a.Production,p=a.Rated,m=a.Metascore;return Object(_.jsxs)(f.a,{className:"mt-3 mb-3",children:[Object(_.jsx)(f.a.Header,{as:"h2",children:r}),Object(_.jsx)(f.a.Body,{children:Object(_.jsxs)(O.a,{children:[Object(_.jsx)(u.a,{xs:{span:12},md:{span:6},children:Object(_.jsx)(f.a.Img,{src:i})}),Object(_.jsxs)(u.a,{xs:{span:12},md:{span:6},children:[Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Plot:"})," ",s]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Writers:"})," ",l]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Actors: "}),j]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Duration: "}),o]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Release: "}),d]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Producer: "}),h]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Rated: "}),p]})}),Object(_.jsx)(O.a,{children:Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:"Metascore: "}),m]})})]})]})}),Object(_.jsx)(f.a.Footer,{children:Object(_.jsx)(x.a,{variant:"danger",onClick:function(){e.clearDetailState(),t.push("/list")},children:"Back to movies list"})})]})})),S=c(29),A=c(2),w={movies:[],searchTerm:"",page:1,detail:{}},D=Object(o.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAKE_GET_MOVIES":return Object(A.a)(Object(A.a)({},e),{},{movies:["just a joke"]});case"GET_MOVIES":return Object(A.a)(Object(A.a)({},e),{},{movies:[].concat(Object(S.a)(e.movies),Object(S.a)(t.payload))});case"UPDATE_SEARCH_TERM":return Object(A.a)(Object(A.a)({},e),{},{searchTerm:t.payload});case"UPDATE_PAGE_INDEX":return Object(A.a)(Object(A.a)({},e),{},{page:t.payload});case"CLEAR_MOVIES_LIST":return Object(A.a)(Object(A.a)({},e),{},{movies:[]});case"GET_DETAIL_MOVIE":return Object(A.a)(Object(A.a)({},e),{},{detail:t.payload});case"CLEAR_DETAIL_PAGE":return Object(A.a)(Object(A.a)({},e),{},{detail:{}});default:return e}}),Object(o.a)(l.a));var L=function(){return Object(_.jsx)(j.a,{store:D,children:Object(_.jsx)(i.a,{children:Object(_.jsx)(d.a,{children:Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(b.c,{children:[Object(_.jsx)(b.a,{path:"/list",children:Object(_.jsx)(I,{})}),Object(_.jsx)(b.a,{path:"/detail/:id",children:Object(_.jsx)(M,{})})]})})})})})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,84)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(L,{})}),document.getElementById("root")),P()}},[[78,1,2]]]);
//# sourceMappingURL=main.d976d369.chunk.js.map